# Тестовое задание для вакансии junior backend developer в MEDODS.
Данный проект содержит функционал сервиса аутенфикации при помощи jwt-токенов. Система основана на 2-х видах токенов: access и refresh. Access токен - стандартный jwt токен с payload, содержащим в себе стандартные claims, а также guid и session_id. Refresh токен - случаный токен, закодированный в base64. В БД хранится только refresh токен в виде bcrypt хэша
Есть 4 основных операций, а также одна дополнительная, направленная на удобство тестирования работы программы.  
1. ***GetTokens*** - функция для получения пары токенов access и refresh. Функция принимает параметр guid, наличие которого проверяется в БД и создается сессия (имеется возможность нескольких сессий для 1-го пользователя, например с разных устройств)
2. ***RefreshTokens*** - функция для обновления пары токенов на основе пары выданных до этого токенов. Access токен при запросе берется из Authorization хэдера, а refresh передается через json. При этом токены проходят **все необходимые проверки**, включая проверку изменения ip и user-agent, которые передаются через заголовки. Refresh можно сделать только парой токенов, выданной вместе, т.к происходит сравнение refresh токена полученного от пользователя с bcrypt хэшэм refresh токена, который соответствует id сессии, полученной из payload токена access.
3. ***GetGUID*** - функция для получения guid пользователя. Данный роут защищен - происходит проверка наличия предоставляемого токена в блэклисте.
4. ***Logout*** - функция для выхода из системы. Добавляет access токен в блэклист, а также удаляется сессия с refresh токеном.
   
Дополнительная функция - ***AddUser*** создана для удобства проверки тестового задания. Она генерирует guid и добавляет пользователя с этим guid в БД. Функция возвращает guid для дальнейших операций. 
